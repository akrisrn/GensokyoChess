# 简介

一个融合了东方 project 角色和 dnd3r 战斗规则的象棋类游戏。

# 编译

- 需求
    - `jdk 1.8 环境`
- windows
    - 双击 `buildGui.bat` 编译打包 Gui 版本
        - `java -jar gnc-2d-gui.jar` 执行
    - 双击 `build.bat` 编译打包命令行版本
        - `java -jar gnc-2d.jar` 执行
- linux
    - `sh buildGui.sh` 编译打包 Gui 版本
        - `java -jar gnc-2d-gui.jar` 执行
    - `sh build.sh` 编译打包命令行版本
        - `java -jar gnc-2d.jar` 执行

# 游戏说明
## 棋盘

- 方格式棋位，`9x9` 大小
- `*` 是河流
- `|` 是桥
- 棋盘由河流与桥分为两部分，下面红方区域，上面是黑方区域

![](http://7xl9xd.com1.z0.glb.clouddn.com/chessboard.png)

## 棋子

- 一方最多有 `16` 个棋子，其中一个是 `国王` 。
- 每一个棋子都有等级
    - 棋子的等级为 `力量`、`敏捷`、`体质` 的三项调整值之和
    - 除 `国王` 外，单个棋子的等级可以自由分配
    -  `国王` 等级强制为 `0`，其它棋子等级最低为 `1`，最高为 `5`
    - 一方棋子的等级总和必须为 `15`
- 每一个棋子都至少有一个技能， `国王` 除了自己的 `棋子技能` 外还有一个额外的 `国王技能`
- 每一个棋子都有自身的属性，包括：
    - `力量`、`敏捷`、`体质`
    - 调整值：
        - 属性调整值：`属性值(力量、敏捷、体质) - 10，然后向下取整除 2`
        - 体型调整值：见附表
    - 攻击力：
        - 近战攻击力：`2d(等级 + 1) + 力量调整值 + (技能加值)`
        - 远程攻击力：`1d(等级 + 6 - (近战减值 (5))) + 敏捷调整值 + (技能加值)`
    - 生命值：`10 + 体质调整值 + (等级 - 1) * 3`
    - 防御等级：`10 + 敏捷调整值 + 体型调整值 + (河流加值 (5)) + (防御加值 (2)) + (技能加值)`
    - 先攻加值：`敏捷调整值 + (技能加值)`
    - 攻击加值：
        - 近战攻击加值：`力量调整值 + 体型调整值 + (技能加值)`
        - 远程攻击加值：`敏捷调整值 + 体型调整值 - 距离减值(与目标之间的格子数 + 2) + (技能加值)`
- 当棋子的生命值小于等于 `0` 时棋子死亡

## 规则

- 双人博弈，分为 `黑方` 和 `红方`，对应棋盘上下两个区域
- 胜负：
	-  `国王` 被打败或认输的一方算输
	- 当双方都只剩 `国王` 时算平
- 游戏开始前：
    - 双方自由放置棋子到己方区域的方格中，一个格子占一个棋子
    -  `国王` 必须置于 `第一行中间一格(红方)`、或 `第九行中间一格(黑方)`
- 游戏开始后:
    - 红方先行，然后轮流行动
    - 在你的回合，你可以让棋子进行一个 `移动动作` 和一个 `标准动作`、或两个 `移动动作`、或两个 `标准动作` (可以分两个棋子进行)
        - 移动动作：让棋子移动到周围的一格(`3x3` 范围内)，无法移动到已有棋子的格子内
        - 标准动作：一次 `战斗` 或释放一次 `技能`
    -  `国王` 无法离开己方区域
- 河流：
	- 必须使用两次 `移动动作` 才能进入河流
	- 如果棋子在河中：
		- 棋子只能进行 `移动动作`，且必须使用两次 `移动动作` 才能离开河流
		- 棋子只会受到 `远程攻击`
    - 棋子无法进行 `借机攻击`
		- 棋子的 `防御等级` 可以获得额外的 `河流加值`
	- 棋子离开河流不会受到 `借机攻击`
- 原地防御：
    - 棋子可以放弃一次 `移动动作` 进行一次 `原地防御`
    - `原地防御` 时，棋子的 `防御等级` 可以获得额外的 `防御加值` (最高累加两次)
    - 当棋子进行 `移动动作` 或 `标准动作` 后，原先的 `防御加值` 消失
- 战斗：
    - 棋子周围 `3x3` 的范围为 `威胁区域`
    - 如果己方棋子移动到了对方棋子的 `威胁区域`，则可以进行一次 `正面攻击`
    - 如果己方棋子具有 `远程攻击力`
        - 如果攻击目标在 `威胁区域` 内，可以对其进行一次 `近战攻击`
        - 如果攻击目标不在 `威胁区域` 内，且在与己方棋子的 `无阻碍直线距离` 上，可以对其进行一次 `远程攻击`
    - 如果对方棋子在己方棋子的 `威胁区域` 内 `释放技能`、进行 `近战攻击` 和 `远程攻击`，或在没有进行 `攻击` 和释放 `技能` 后离开，则己方棋子可以在这之前进行一次 `借机攻击`
    - 正面攻击：
        - 对战棋子先各投一次 `先攻检定` (`1d20 + 先攻加值`)
            - 如果攻击方 `先攻检定` 大于对方 `先攻检定` ，攻击方先进行攻击
            - 如果攻击方 `先攻检定` 小于对方 `先攻检定` ，对方先进行攻击
            - 如果攻击方 `先攻检定` 等于对方 `先攻检定`
	            - 如果攻击方 `敏捷值` 大于对方 `敏捷值` ，攻击方先进行攻击
	            - 如果攻击方 `敏捷值` 小于等于对方 `敏捷值` ，对方先进行攻击
        - 进行攻击要投一次 `攻击检定` (`1d20 + 近战攻击加值`)
            - 如果 `攻击检定` 大于对方 `防御等级` ，攻击命中
            - 如果 `攻击检定` 小于对方 `防御等级` ，攻击失手
            - 如果 `攻击检定` 等于对方 `防御等级`
	            - 如果攻击方 `力量值` 大于对方 `力量值` ，攻击命中
	            - 如果攻击方 `力量值` 小于等于对方 `力量值` ，攻击失手
            - 如果 `1d20` 结果为 `1`，则必定失手
            - 如果 `1d20` 结果为 `20`，则必定命中，并且造成 `重击威胁`
        - 如果攻击命中，攻击方投一次 `伤害检定` ( `近战攻击力` 或减去 `近战减值` 的 `远程攻击力` )，扣取对方对应的 `生命值`
        - 如果有一方棋子 `阵亡`、或轮流进行了三轮对攻，战斗结束
    - 远程攻击：
        - 攻击方投一次 `攻击检定` (`1d20 + 远程攻击加值`)
            - 如果 `攻击检定` 大于对方 `防御等级` ，攻击命中
            - 如果 `攻击检定` 小于对方 `防御等级` ，攻击失手
            - 如果 `攻击检定` 等于对方 `防御等级`
	            - 如果攻击方 `敏捷值` 大于对方 `敏捷值` ，攻击命中
	            - 如果攻击方 `敏捷值` 小于等于对方 `敏捷值` ，攻击失手
            - 如果 `1d20` 结果为 `1`，则必定失手
            - 如果 `1d20` 结果为 `20`，则必定命中，并且造成 `重击威胁`
        - 如果攻击命中，攻击方投一次 `伤害检定` ( `远程攻击力` )，扣取对方对应的 `生命值`
        - 然后战斗结束
    - 近战攻击：
        - 攻击方投一次 `攻击检定` （同 `远程攻击` ）
        - 如果攻击命中，攻击方投一次 `伤害检定` (减去 `近战减值` 的 `远程攻击力` )，扣取对方对应的 `生命值`
        - 然后战斗结束
    - 借机攻击：
        - 如果攻击方没有 `近战攻击力` ，则无法进行 `借机攻击`
        - 攻击方投一次 `攻击检定` (`1d20 + 近战攻击加值`)
            - 如果 `攻击检定` 大于对方 `防御等级` ，攻击命中
            - 如果 `攻击检定` 小于对方 `防御等级` ，攻击失手
            - 如果 `攻击检定` 等于对方 `防御等级`
	            - 如果攻击方 `力量值` 大于对方 `力量值` ，攻击命中
	            - 如果攻击方 `力量值` 小于等于对方 `力量值` ，攻击失手
            - 如果 `1d20` 结果为 `1`，则必定失手
            - 如果 `1d20` 结果为 `20`，则必定命中，并且造成 `重击威胁`
        - 如果攻击命中，攻击方投一次 `伤害检定` ( `近战攻击力` )，扣取对方对应的 `生命值`
        - 然后战斗结束
    - 重击：
        - 如果造成 `重击威胁` ，再投一次 `攻击检定`
        - 如果 `攻击检定` 大于对方 `防御等级` ，则造成 `重击`
            - 再投一次 `伤害检定` ( `近战攻击力` 或 `远程攻击力` 或减去 `近战减值` 的 `远程攻击力` )
            - 将两次伤害加起来作为总伤害，扣取对方对应的 `生命值`
        - 如果 `攻击检定` 小于等于对方的 `防御等级` ，不造成 `重击`
- 技能：
    - 在技能效果范围内释放一次 `棋子技能`
    - 根据技能效果把技能分为：
        - 辅助技能：作用于己方棋子
        - 攻击技能：作用于对方棋子
        - 国王技能：免疫来自对方区域的 `攻击` 和 `技能`

## 附表
### 体型调整值表

| 体型 | 体型调整值 |
| --- | --- |
| 超大型 | -2 |
| 大型 | -1 |
| 中型 | 0 |
| 小型 | +1 |
| 超小型 | +2 |
